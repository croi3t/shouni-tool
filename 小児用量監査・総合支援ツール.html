<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å°å…ç”¨é‡ç›£æŸ»ãƒ»ç·åˆæ”¯æ´ãƒ„ãƒ¼ãƒ« Pro</title>
    <style>
        :root { --primary: #2c3e50; --accent: #3498db; --success: #27ae60; --danger: #c0392b; --warning: #f39c12; --bg: #f4f7f6; --text: #333; }
        body { font-family: "Meiryo", "Hiragino Kaku Gothic ProN", sans-serif; background: var(--bg); margin: 0; padding: 0; color: var(--text); line-height: 1.6; }
        
        /* ãƒ˜ãƒƒãƒ€ãƒ¼ã¨ã‚¿ãƒ– */
        header { background: var(--primary); color: #fff; padding: 15px 0; text-align: center; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        h1 { margin: 0; font-size: 1.4rem; }
        
        .tab-nav { display: flex; justify-content: center; background: #34495e; padding: 0; list-style: none; margin: 0; }
        .tab-nav li { cursor: pointer; padding: 12px 20px; color: #bdc3c7; transition: 0.3s; border-bottom: 4px solid transparent; font-weight: bold; font-size:0.95rem; }
        .tab-nav li:hover { color: #fff; background: #3e5871; }
        .tab-nav li.active { color: #fff; border-bottom-color: var(--accent); background: #2c3e50; }

        /* ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚¨ãƒªã‚¢ */
        .container { max-width: 1000px; margin: 20px auto; padding: 0 15px; }
        .tab-content { display: none; background: #fff; padding: 25px; border-radius: 8px; box-shadow: 0 4px 10px rgba(0,0,0,0.05); animation: fadeIn 0.3s; }
        .tab-content.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        /* â– â–  ç›£æŸ»ãƒ„ãƒ¼ãƒ«ç”¨ã‚¹ã‚¿ã‚¤ãƒ« â– â–  */
        .panel { background: #eef2f5; padding: 20px; border-radius: 8px; margin-bottom: 20px; border: 1px solid #dce4ec; }
        .row { display: flex; gap: 15px; margin-bottom: 15px; flex-wrap: wrap; }
        .col { flex: 1; min-width: 180px; } /* å°‘ã—å¹…ã‚’ç‹­ã‚ã¦3åˆ—å¯¾å¿œ */
        label { display: block; font-weight: bold; margin-bottom: 5px; color: var(--primary); font-size:0.95rem; }
        input, textarea { width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 4px; font-size: 16px; box-sizing: border-box; }
        input:focus, textarea:focus { border-color: var(--accent); outline: none; }

        .search-container { position: relative; }
        #drugList { list-style: none; padding: 0; margin: 0; position: absolute; width: 100%; max-height: 300px; overflow-y: auto; background: #fff; border: 1px solid #ddd; z-index: 100; display: none; box-shadow: 0 8px 16px rgba(0,0,0,0.15); }
        #drugList li { padding: 12px; cursor: pointer; border-bottom: 1px solid #eee; font-size: 16px; }
        #drugList li:hover { background: #e6f7ff; color: var(--accent); }

        /* çµæœã‚«ãƒ¼ãƒ‰ */
        #resultCard { display: none; border: 1px solid #ddd; border-radius: 8px; overflow: hidden; background: #fff; margin-top: 20px; }
        .card-header { background: var(--primary); color: #fff; padding: 15px 20px; display: flex; justify-content: space-between; align-items: center; }
        .card-body { padding: 20px; }

        .audit-box { padding: 20px; border-radius: 6px; border-left: 6px solid #ccc; background: #f9f9f9; margin-bottom: 25px; font-size: 1.1rem; }
        .audit-safe { background: #e8f5e9; border-left-color: var(--success); color: #1b5e20; }
        .audit-danger { background: #fbe9e7; border-left-color: var(--danger); color: #b71c1c; }
        .audit-check { background: #fff3e0; border-left-color: var(--warning); color: #e65100; }

        .original-text { 
            background: #fff; padding: 15px; border: 1px solid #ddd; border-radius: 4px; 
            font-size: 1rem; color: #444; line-height: 1.8; font-family: inherit;
            white-space: pre-wrap; word-wrap: break-word; word-break: break-all;
        }
        .dose-label { font-size: 0.9rem; background: #fff; padding: 4px 10px; border-radius: 15px; color: var(--primary); font-weight: bold; }
        
        .ref-links a { display: inline-block; margin-right: 15px; margin-bottom: 8px; color: var(--accent); text-decoration: none; background: #f0f8ff; padding: 6px 12px; border-radius: 20px; font-size: 0.9rem; }
        .ref-links a:hover { background: var(--accent); color: #fff; }
        .ref-nolink { display: inline-block; margin-right: 15px; margin-bottom: 8px; color: #666; background: #f5f5f5; padding: 6px 12px; border-radius: 20px; border: 1px solid #ddd; font-size: 0.9rem; }

        /* â– â–  è³‡æ–™ãƒ»çŸ¥è­˜ã‚¿ãƒ–ç”¨ã‚¹ã‚¿ã‚¤ãƒ« â– â–  */
        h2 { border-left: 5px solid var(--accent); padding-left: 10px; color: var(--primary); margin-top: 30px; font-size:1.3rem; }
        .chart-container { width: 100%; height: 350px; position: relative; margin-bottom: 20px; border:1px solid #eee; }
        .formula-box { background: #fdfdfd; border: 1px solid #eee; padding: 15px; border-radius: 5px; margin-bottom: 15px; height: 100%; }
        .formula-title { font-weight: bold; color: var(--accent); margin-bottom: 5px; }
        .formula-math { font-family: "Times New Roman", serif; font-size: 1.2rem; background: #eee; padding: 10px; text-align: center; border-radius: 4px; margin: 10px 0; }
        
        /* ãƒ†ãƒ¼ãƒ–ãƒ«å…±é€š */
        table.common-table { width: 100%; border-collapse: collapse; font-size: 0.95rem; margin-top:10px; }
        table.common-table th, table.common-table td { border: 1px solid #ddd; padding: 8px 5px; text-align: center; }
        table.common-table th { background: #f2f2f2; color:var(--primary); font-weight:bold; }
        table.common-table tr:nth-child(even) td { background: #fafafa; }

        /* æˆé•·æ›²ç·šãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆæ¨ªã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ï¼‰ */
        #growthTableContainer { overflow-x: auto; margin-bottom: 30px; }
        #growthTableContainer table { min-width: 600px; }
        #growthTableContainer th:first-child, #growthTableContainer td:first-child { 
            background: #eef2f5; font-weight:bold; width: 80px; position: sticky; left: 0; z-index: 10; border-right: 2px solid #ddd; 
        }
        /* Von Harnackãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆå·¦å¯„ã›ï¼‰ */
        .harnack-table th { text-align: left; padding-left: 15px; width: 40%; }
        .harnack-table td { text-align: left; padding-left: 15px; }

        /* â– â–  ãƒ‡ãƒ¼ã‚¿è¨­å®šã‚¿ãƒ–ç”¨ã‚¹ã‚¿ã‚¤ãƒ« â– â–  */
        .btn-save { background: var(--success); color: white; border: none; padding: 12px 24px; font-size: 16px; border-radius: 4px; cursor: pointer; font-weight: bold; width: 100%; margin-top:10px; }
        .btn-save:hover { background: #219150; }
        .data-status { margin-top: 15px; font-weight: bold; text-align: center; color: var(--primary); }
    </style>
</head>
<body>

<header>
    <h1>ğŸ’Š å°å…ç”¨é‡ç›£æŸ»ãƒ»ç·åˆæ”¯æ´ãƒ„ãƒ¼ãƒ«</h1>
</header>

<ul class="tab-nav">
    <li class="active" onclick="switchTab('tab-calc')">ç›£æŸ»ãƒ»è¨ˆç®—</li>
    <li onclick="switchTab('tab-knowledge')">è³‡æ–™ãƒ»çŸ¥è­˜</li>
    <li onclick="switchTab('tab-settings')">ãƒ‡ãƒ¼ã‚¿è¨­å®š</li>
</ul>

<div class="container">

    <div id="tab-calc" class="tab-content active">
        <div class="panel">
            <div class="row">
                <div class="col search-container" style="flex: 2; min-width: 100%;">
                    <label>è–¬å‰¤æ¤œç´¢ï¼ˆå•†å“åãƒ»ä¸€èˆ¬åãƒ»ã²ã‚‰ãŒãªï¼‰</label>
                    <input type="text" id="searchBox" placeholder="ä¾‹ï¼šã‹ã‚ãªãƒ¼ã‚‹ã€ã‚ã™ã¹ã‚Šã‚“..." autocomplete="off">
                    <ul id="drugList"></ul>
                </div>
            </div>
            <div class="row">
                <div class="col">
                    <label>æ‚£è€…ä½“é‡ (kg)</label>
                    <input type="number" id="weight" step="0.1" placeholder="ä¾‹: 15.5" oninput="runAudit()">
                </div>
                <div class="col">
                    <label>å¹´é½¢ (æ­³)</label>
                    <input type="number" id="age" step="0.1" placeholder="ä¾‹: 3" oninput="runAudit()">
                </div>
                <div class="col">
                    <label id="doseLabel">å‡¦æ–¹é‡ (é¸æŠå¾…ã¡)</label>
                    <input type="number" id="doseInput" placeholder="å‡¦æ–¹å€¤ã‚’å…¥åŠ›" oninput="runAudit()" disabled>
                </div>
            </div>
        </div>

        <div id="resultCard">
            <div class="card-header">
                <div>
                    <span id="resName" style="font-weight:bold; font-size:1.2rem;"></span>
                    <span id="resGeneric" style="font-size:0.9rem; margin-left:10px; opacity:0.9;"></span>
                </div>
                <span id="auditTypeBadge" class="dose-label"></span>
            </div>
            <div class="card-body">
                <div id="auditResult" class="audit-box audit-check"></div>
                
                <div style="margin-bottom:8px; font-weight:bold; color:var(--primary);">ç”¨æ³•ãƒ»ç”¨é‡ï¼ˆå°å…ï¼‰åŸæ–‡:</div>
                <div id="resPedsText" class="original-text"></div>

                <div id="refArea" style="margin-top:20px; display:none;">
                    <div style="margin-bottom:8px; font-weight:bold; color:#666;">ğŸ“š å‚è€ƒæ–‡çŒ®:</div>
                    <div id="refLinksContainer" class="ref-links"></div>
                </div>
            </div>
        </div>
    </div>

    <div id="tab-knowledge" class="tab-content">
        <h2>ğŸ“Š èº«ä½“ç™ºè‚²æ›²ç·š (0-12æ­³)</h2>
        <p style="font-size:0.9rem; color:#666;">â€»åšç”ŸåŠ´åƒçœ ä¹³å¹¼å…èº«ä½“ç™ºè‚²èª¿æŸ»ç­‰ã‚’å‚è€ƒã«ã—ãŸè¿‘ä¼¼å¹³å‡å€¤ã§ã™ã€‚</p>
        
        <div class="row">
            <div class="col">
                <h3 style="text-align:center; color:#e74c3c;">å¥³å­ (Girls)</h3>
                <div id="chartGirl" class="chart-container"></div>
            </div>
            <div class="col">
                <h3 style="text-align:center; color:#3498db;">ç”·å­ (Boys)</h3>
                <div id="chartBoy" class="chart-container"></div>
            </div>
        </div>

        <h3>ğŸ“ˆ å¹³å‡ä½“é‡ãƒ‡ãƒ¼ã‚¿ä¸€è¦§è¡¨ (kg)</h3>
        <div id="growthTableContainer"></div>

        <h2>ğŸ§® å°å…è–¬ç”¨é‡æ›ç®—å¼</h2>
        
        <div class="formula-box" style="margin-bottom:20px;">
            <div class="formula-title">Augsbergerï¼ˆã‚¢ã‚¦ã‚°ã‚¹ãƒãƒ¼ã‚¬ãƒ¼ï¼‰å¼ II</div>
            <div>ä½“é‡ã‹ã‚‰å°å…é‡ã‚’ç®—å‡ºã™ã‚‹éš›ã«ã‚ˆãç”¨ã„ã‚‰ã‚Œã‚‹å¼ã§ã™ï¼ˆä¸»ã«1æ­³ä»¥ä¸Šï¼‰ã€‚</div>
            <div class="formula-math">å°å…é‡ = æˆäººé‡ Ã— ( ä½“é‡[kg] Ã— 4 + 20 ) / 100</div>
            <div style="background:#f0f0f0; padding:10px; border-radius:4px;">
                <strong>ç°¡æ˜“è¨ˆç®—:</strong><br>
                æˆäººé‡: <input type="number" id="augAdult" style="width:80px;" placeholder="mg"> mg Ã— 
                ä½“é‡: <input type="number" id="augWeight" style="width:80px;" placeholder="kg"> kg 
                <button onclick="calcAugsberger()" style="padding:5px 10px; cursor:pointer;">è¨ˆç®—</button> 
                = <span id="augResult" style="font-weight:bold; color:var(--accent);">---</span> mg
            </div>
        </div>

        <div class="row">
            <div class="col">
                <div class="formula-box">
                    <div class="formula-title">Von Harnackï¼ˆãƒãƒ«ãƒŠãƒƒã‚¯ï¼‰ã®è¡¨</div>
                    <div style="font-size:0.9rem; color:#666; margin-bottom:5px;">å¹´é½¢ãƒ»æœˆé½¢ã‹ã‚‰æˆäººé‡ã«å¯¾ã™ã‚‹æ¯”ç‡ã‚’ç®—å‡º</div>
                    <table class="common-table harnack-table">
                        <tr><th>æ–°ç”Ÿå… (ï½1ãƒ¶æœˆ)</th><td>1/20 ï½ 1/10</td></tr>
                        <tr><th>ä¹³å… (ï½3ãƒ¶æœˆ)</th><td>1/6</td></tr>
                        <tr><th>ä¹³å… (ï½6ãƒ¶æœˆ)</th><td>1/5</td></tr>
                        <tr><th>1æ­³</th><td>1/4</td></tr>
                        <tr><th>3æ­³</th><td>1/3</td></tr>
                        <tr><th>7.5æ­³</th><td>1/2</td></tr>
                        <tr><th>12æ­³</th><td>2/3</td></tr>
                        <tr><th>æˆäºº</th><td>1</td></tr>
                    </table>
                </div>
            </div>
            
            <div class="col">
                <div class="formula-box">
                    <div class="formula-title">Youngï¼ˆãƒ¤ãƒ³ã‚°ï¼‰å¼</div>
                    <div style="font-size:0.9rem;">å¹´é½¢ã‹ã‚‰ç®—å‡ºï¼ˆä½“é‡æƒ…å ±ãŒãªã„å ´åˆãªã©ï¼‰</div>
                    <div class="formula-math">æˆäººé‡ Ã— å¹´é½¢ / ( å¹´é½¢ + 12 )</div>
                    
                    <hr style="border:0; border-top:1px solid #ddd; margin:15px 0;">
                    
                    <div class="formula-title">Crawfordï¼ˆã‚¯ãƒ­ãƒ•ã‚©ãƒ¼ãƒ‰ï¼‰å¼</div>
                    <div style="font-size:0.9rem;">ä½“è¡¨é¢ç©ã‹ã‚‰ç®—å‡ºï¼ˆæŠ—ç™Œå‰¤ãªã©ï¼‰</div>
                    <div class="formula-math">æˆäººé‡ Ã— ä½“è¡¨é¢ç©(mÂ²) / 1.73</div>
                </div>
            </div>
        </div>
    </div>

    <div id="tab-settings" class="tab-content">
        <h2>ğŸ› ï¸ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ›´æ–°</h2>
        <p>Excelãƒ‡ãƒ¼ã‚¿ã‚’ã“ã“ã«è²¼ã‚Šä»˜ã‘ã¦ã€Œä¿å­˜ã€ã™ã‚‹ã¨ã€ãƒ„ãƒ¼ãƒ«å†…ã®ãƒ‡ãƒ¼ã‚¿ãŒæ›´æ–°ã•ã‚Œã¾ã™ã€‚<br>
        <small>â€»ãƒ‡ãƒ¼ã‚¿ã¯ãƒ–ãƒ©ã‚¦ã‚¶å†…(LocalStorage)ã«ä¿å­˜ã•ã‚Œã¾ã™ã€‚</small></p>
        
        <div style="background:#fff3cd; padding:15px; border-left:5px solid #f39c12; margin-bottom:15px; font-size:0.9rem;">
            <strong>ğŸ“ Excelã®åˆ—é †åº (å…¨10åˆ—):</strong><br>
            [1]å•†å“å [2]ä¸€èˆ¬å [3]ã‚ˆã¿ãŒãª [4]å°å…æ–‡ [5]æœ€å°ä¿‚æ•° [6]æœ€å¤§ä¿‚æ•° [7]å˜ä½(0æ—¥/1å›) [8]ä¸Šé™ [9]å‚ç…§ID <strong>[10]å¹´é½¢å›ºå®šãƒ«ãƒ¼ãƒ«</strong><br>
            â€»ã‚»ãƒ«å†…æ”¹è¡Œã€ç©ºç™½ã‚¿ãƒ–ã«å¯¾å¿œã—ã¦ã„ã¾ã™ã€‚
        </div>

        <textarea id="pasteArea" rows="12" placeholder="ã“ã“ã«Excelã‹ã‚‰ã‚³ãƒ”ãƒ¼ã—ãŸãƒ‡ãƒ¼ã‚¿ã‚’è²¼ã‚Šä»˜ã‘ã¦ãã ã•ã„..."></textarea>
        <button class="btn-save" onclick="saveData()">ãƒ‡ãƒ¼ã‚¿ã‚’å¤‰æ›ã—ã¦ä¿å­˜ãƒ»æ›´æ–°ã™ã‚‹</button>
        <div id="saveStatus" class="data-status"></div>

        <div style="margin-top:30px; border-top:1px solid #eee; padding-top:10px;">
            <h3>ä¿å­˜æ¸ˆã¿ãƒ‡ãƒ¼ã‚¿ã®ãƒªã‚»ãƒƒãƒˆ</h3>
            <button onclick="resetData()" style="background:#e74c3c; color:white; border:none; padding:8px 16px; border-radius:4px; cursor:pointer;">åˆæœŸçŠ¶æ…‹ã«æˆ»ã™</button>
        </div>
    </div>

</div>

<script>
    // --- 1. ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•° & åˆæœŸãƒ‡ãƒ¼ã‚¿ ---
    let dbDrugs = [];
    
    // æˆé•·æ›²ç·šãƒ‡ãƒ¼ã‚¿
    const growthData = {
        boy:  [[0,3.0],[1,9.6],[2,12.5],[3,14.6],[4,16.7],[5,18.9],[6,21.4],[7,24.1],[8,27.2],[9,30.6],[10,34.2],[11,38.2],[12,42.5]],
        girl: [[0,3.0],[1,8.9],[2,11.8],[3,14.0],[4,16.2],[5,18.5],[6,20.9],[7,23.6],[8,26.5],[9,30.0],[10,33.8],[11,38.0],[12,42.0]]
    };
    
    // å‚è€ƒæ–‡çŒ®ãƒªã‚¹ãƒˆ
    const dbRefs = {
        1: { title: "æ·»ä»˜æ–‡æ›¸", url: "" },
        2: { title: "æ–°å°å…è–¬é‡é‡ã€€æ”¹è¨‚ç¬¬10ç‰ˆ", url: "" },
        3: { title: "å…ˆå¤©æ€§å¿ƒç–¾æ‚£ä¸¦ã³ã«å°å…æœŸå¿ƒç–¾æ‚£ã®è¨ºæ–­æ¤œæŸ»ã¨è–¬ç‰©ç™‚æ³•ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³ï¼ˆ2018å¹´æ”¹è¨‚ç‰ˆï¼‰", url: "https://www.j-circ.or.jp/cms/wp-content/uploads/2020/02/JCS2018_Yasukochi.pdf" },
        4: { title: "å°å…çµæ ¸è¨ºç™‚ã®ã¦ã³ã(æ”¹è¨‚ç¬¬3ç‰ˆ)", url: "https://jata.or.jp/wp-content/uploads/2025/04/shouni_tebiki_202504.pdf" },
        5: { title: "Official American Thoracic Society/CDC/IDSA Clinical Practice Guidelines", url: "https://academic.oup.com/cid/article/63/7/e147/2196792" },
        6: { title: "æ–°ç”Ÿå…ãƒã‚¹ã‚¹ã‚¯ãƒªãƒ¼ãƒ‹ãƒ³ã‚°ã‚¬ã‚¤ãƒ‰å¯¾è±¡ç–¾æ‚£ç­‰è¨ºç™‚ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³Part2", url: "https://jsimd.net/pdf/newborn-mass-screening-disease-practice-guideline2019_v2.pdf" },
        7: { title: "ãƒã‚¯ãƒ­ãƒ©ã‚¤ãƒ‰ç³»æŠ—ç”Ÿç‰©è³ªã®æ–°ã—ã„å±•é–‹ è‡¨åºŠã¨å¾®ç”Ÿç‰© vol.27 No.6", url: "https://search.jamas.or.jp/default/link?pub_year=2000&ichushi_jid=J01816&link_issn=&doc_id=20001128020009&doc_link_id=%2Fac3rbbtb%2F2000%2F002706%2F009%2F0839-0842%26dl%3D0&url=https%3A%2F%2Fwww.medicalonline.jp%2Fjamas.php%3FGoodsID%3D%2Fac3rbbtb%2F2000%2F002706%2F009%2F0839-0842%26dl%3D0&type=MedicalOnline&icon=https%3A%2F%2Fjk04.jamas.or.jp%2Ficon%2F00004_2.gif" },
        8: { title: "ä»Šæ—¥ã®æ²»ç™‚æŒ‡é‡2025ï¼è†€èƒ±å°¿ç®¡é€†æµ", url: "" },
        9: { title: "Medspace", url: "https://reference.medscape.com/drug/valium-valtoco-diazepam-342902" },
        10: { title: "æœªæ‰¿èªè–¬ãƒ»é©å¿œå¤–è–¬ã®è¦æœ›ã«å¯¾ã™ã‚‹ä¼æ¥­è¦‹è§£ï¼ˆæµ·å¤–ã®æ·»ä»˜æ–‡æ›¸æƒ…å ±ã¾ã¨ã‚ï¼‰", url: "https://www.mhlw.go.jp/topics/2012/03/dl/kigyoukenkai-160.pdf" },
        11: { title: "JAID/JSC æ„ŸæŸ“ç—‡æ²»ç™‚ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³ 2015â€•å°¿è·¯æ„ŸæŸ“ç—‡ãƒ»ç”·æ€§æ€§å™¨æ„ŸæŸ“ç—‡â€•", url: "https://www.chemotherapy.or.jp/uploads/files/guideline/jaidjsc-kansenshochiryo_nyouro.pdf" },
        12: { title: "å°å…æ°—ç®¡æ”¯å–˜æ¯æ²»ç™‚ãƒ»ç®¡ç†ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³2023", url: "" },
        13: { title: "UpToDateã€€12æ­³æœªæº€ã®å°å…ã«ãŠã‘ã‚‹æ€¥æ€§å–˜æ¯å¢—æ‚ªï¼šæ•‘æ€¥éƒ¨é–€ã§ã®ç®¡ç†", url: "https://www.uptodate.com/contents/acute-asthma-exacerbations-in-children-younger-than-12-years-emergency-department-management?search=%E3%83%87%E3%82%AD%E3%82%B5%E3%83%A1%E3%82%BF%E3%82%BE%E3%83%B3%E3%80%80%E6%B0%97%E7%AE%A1%E6%94%AF%E5%96%98%E6%81%AF&source=search_result&selectedTitle=1~150&usage_type=default&display_rank=1" },
        14: { title: "UpToDateã€€ä¹³å…ãŠã‚ˆã³å°å…ã«ãŠã‘ã‚‹21-æ°´é…¸åŒ–é…µç´ æ¬ æã«ã‚ˆã‚‹å…¸å‹çš„ãªå…ˆå¤©æ€§å‰¯è…éå½¢æˆï¼šæ²»ç™‚", url: "https://www.uptodate.com/contents/classic-congenital-adrenal-hyperplasia-due-to-21-hydroxylase-deficiency-in-infants-and-children-treatment?search=%E3%83%87%E3%82%AD%E3%82%B5%E3%83%A1%E3%82%BF%E3%82%BE%E3%83%B3%E3%80%80%E5%85%88%E5%A4%A9%E6%80%A7%E5%89%AF%E8%85%8E%E9%81%8E%E5%BD%A2%E6%88%90%E7%97%87&source=search_result&selectedTitle=4~150&usage_type=default&display_rank=4" },
        15: { title: "è»½ç—‡èƒƒè…¸ç‚é–¢é€£ã‘ã„ã‚Œã‚“ã«å¯¾ã™ã‚‹å°‘é‡carbamazepineç™‚æ³• è„³ã¨ç™ºé”2005", url: "https://www.jstage.jst.go.jp/article/ojjscn1969/37/6/37_6_493/_pdf/-char/ja" },
        16: { title: "ä»Šæ—¥ã®å°å…æ²»ç™‚æŒ‡é‡ç¬¬17ç‰ˆ>ãƒ“ã‚¿ãƒŸãƒ³Dæ¬ ä¹æ€§ãã‚‹ç—…ãƒ»ä½ã‚«ãƒ«ã‚·ã‚¦ãƒ è¡€ç—‡", url: "" },
        17: { title: "ä»Šæ—¥ã®å°å…æ²»ç™‚æŒ‡é‡ç¬¬17ç‰ˆ >æ–°ç”Ÿå…ã®ä½ã‚«ãƒ«ã‚·ã‚¦ãƒ è¡€ç—‡", url: "" },
        18: { title: "ä»Šæ—¥ã®å°å…æ²»ç™‚æŒ‡é‡ç¬¬17ç‰ˆ>æ€¥æ€§ä¹³å…ä¸‹ç—¢ç—‡", url: "" },
        19: { title: "æ–°ç”Ÿå…è¨ºç™‚ãƒãƒ‹ãƒ¥ã‚¢ãƒ«", url: "" },
        20: { title: "æ–°ç”Ÿå…ç·¨ â…¢.ç–¾æ‚£ã«å¯¾ã™ã‚‹è–¬å‰¤ã®é¸ã³æ–¹ å‘¨ç”£æœŸåŒ»å­¦ 50 (å¢—åˆŠ) 2020", url: "https://mol.medicalonline.jp/library/journal/download?GoodsID=aq9syuse/2020/0050s1/138&name=0588-0591j" },
        21: { title: "åŒ»å¸«ã®ã¿é–²è¦§å¯èƒ½ã®ãƒãƒ‹ãƒ¥ã‚¢ãƒ«å‚è€ƒ", url: "" },
        22: { title: "æ—¥æœ¬å°å…å¾ªç’°å™¨å­¦ä¼šå°å…å¿ƒä¸å…¨è–¬ç‰©æ²»ç™‚ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³ï¼ˆå¹³æˆ27å¹´æ”¹è¨‚ç‰ˆï¼‰", url: "https://jpccs.jp/10.9794/jspccs.31.S2_1/data/index.html" },
        23: { title: "ä»Šæ—¥ã®æ²»ç™‚æŒ‡é‡2024å¹´ç‰ˆ>å°å…ã®ä¾¿ç§˜ç—‡", url: "" },
        24: { title: "ä»Šæ—¥ã®å°å…æ²»ç™‚æŒ‡é‡ç¬¬17ç‰ˆ>ã‚¦ã‚¤ãƒ«ã‚¹æ€§èƒƒè…¸ç‚", url: "" },
        25: { title: "å°å…ç§‘ã§ã™ãã«æˆ¦ãˆã‚‹ãƒ›ã‚³ã¨ã‚¿ãƒ†", url: "" },
        26: { title: "ä¹³å…èƒƒé£Ÿé“é€†æµã«å¯¾ã™ã‚‹å…­å›å­æ¹¯ã®ä½¿ç”¨çµŒé¨“ æ—¥å°å¤–ä¼šèªŒ ç¬¬52å·»2å·", url: "https://www.jstage.jst.go.jp/article/jjsps/52/2/52_243/_pdf/-char/ja" },
        27: { title: "ä»Šæ—¥ã®å°å…æ²»ç™‚æŒ‡é‡ç¬¬17ç‰ˆ>èƒƒé£Ÿé“é€†æµç—‡", url: "" },
        28: { title: "æ–°ç”Ÿå…ç·¨ â…¡.åŸºæœ¬çš„è–¬å‰¤ã®é¸ã³æ–¹ å‘¨ç”£æœŸåŒ»å­¦ 50 (å¢—åˆŠ) 2020", url: "https://mol.medicalonline.jp/library/journal/download?GoodsID=aq9syuse/2020/0050s1/106&name=0458-0462j" },
        29: { title: "ãƒ„ãƒ ãƒ©MEDICAL SITE-å°å…ã®æœç”¨ã«ã¤ã„ã¦", url: "https://medical.tsumura.co.jp/support/knowledge/20221104_2.html" },
        30: { title: "å…¬çŸ¥ç”³è«‹ã¸ã®è©²å½“æ€§ã«ä¿‚ã‚‹å ±å‘Šæ›¸ï¼ˆæ¡ˆï¼‰", url: "https://www.mhlw.go.jp/stf/shingi/2r9852000000ti7f-att/2r9852000000tie2.pdf" },
        31: { title: "æ–°ç”Ÿå…ã«å¯¾ã™ã‚‹é‰„å‰¤æŠ•ä¸ã®ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³ 2017", url: "http://jsnhd.or.jp/pdf/31-1-159-185.pdf" },
        32: { title: "IWK Healthã€€æ–°ç”Ÿå…è–¬ç‰©æŠ•ä¸ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³-é‰„(çµŒå£)", url: "https://www.dir.iwk.nshealth.ca/Home/DDGDetails/46d8310f-1d91-e911-80f2-005056b200d2?PatientPopulation=Neo" }
    };

    // --- 2. èµ·å‹•æ™‚å‡¦ç† ---
    window.onload = function() {
        const savedData = localStorage.getItem('pediatric_drug_db');
        if (savedData) { dbDrugs = JSON.parse(savedData); }
        drawGrowthChart('chartGirl', 'girl');
        drawGrowthChart('chartBoy', 'boy');
        drawGrowthTable();
    };

    // --- 3. ã‚¿ãƒ–åˆ‡ã‚Šæ›¿ãˆ ---
    function switchTab(tabId) {
        document.querySelectorAll('.tab-content').forEach(el => el.classList.remove('active'));
        document.querySelectorAll('.tab-nav li').forEach(el => el.classList.remove('active'));
        document.getElementById(tabId).classList.add('active');
        const navIndex = {'tab-calc':0, 'tab-knowledge':1, 'tab-settings':2}[tabId];
        document.querySelectorAll('.tab-nav li')[navIndex].classList.add('active');
    }

    // --- 4. ç›£æŸ»ãƒ„ãƒ¼ãƒ«ãƒ­ã‚¸ãƒƒã‚¯ ---
    const searchBox = document.getElementById('searchBox');
    const drugList = document.getElementById('drugList');
    const doseInput = document.getElementById('doseInput');
    const doseLabel = document.getElementById('doseLabel');
    let currentDrug = null;

    searchBox.addEventListener('keyup', (e) => {
        const val = e.target.value.toLowerCase().replace(/\s+/g, '');
        if (!val) { drugList.style.display = 'none'; return; }
        drugList.innerHTML = '';
        const hits = dbDrugs.filter(d => 
            (d.name && d.name.toLowerCase().includes(val)) || 
            (d.generic && d.generic.toLowerCase().includes(val)) || 
            (d.yomi && d.yomi.replace(/\s+/g, '').includes(val))
        );

        if (hits.length > 0) {
            drugList.style.display = 'block';
            hits.forEach(d => {
                const li = document.createElement('li');
                li.textContent = `${d.name} (${d.generic})`;
                li.onclick = () => selectDrug(d);
                drugList.appendChild(li);
            });
        } else {
            drugList.style.display = 'none';
        }
    });

    function selectDrug(drug) {
        currentDrug = drug;
        searchBox.value = drug.name;
        drugList.style.display = 'none';
        doseInput.disabled = false;
        doseInput.value = '';
        document.getElementById('resultCard').style.display = 'block';

        document.getElementById('resName').textContent = drug.name;
        document.getElementById('resGeneric').textContent = drug.generic;
        document.getElementById('resPedsText').textContent = drug.text;

        const badge = document.getElementById('auditTypeBadge');
        // è¡¨ç¤ºå˜ä½ã®æ±ºå®šï¼ˆå¹´é½¢ãƒ«ãƒ¼ãƒ«å„ªå…ˆã€æ¬¡ã«ä½“é‡ãƒ«ãƒ¼ãƒ«ï¼‰
        let unit = 0;
        if (drug.ageRule) unit = drug.ageRule.unit;
        else if (drug.rule) unit = drug.rule.unit;

        if (drug.ageRule || drug.rule) {
            if (unit === 1) {
                doseLabel.textContent = "å‡¦æ–¹é‡ (1å›é‡ mg)";
                badge.textContent = "åˆ¤å®šåŸºæº–: 1å›é‡";
                badge.style.background = "#fff3cd"; badge.style.color = "#856404";
            } else {
                doseLabel.textContent = "å‡¦æ–¹é‡ (1æ—¥ç·é‡ mg)";
                badge.textContent = "åˆ¤å®šåŸºæº–: 1æ—¥ç·é‡";
                badge.style.background = "#d1ecf1"; badge.style.color = "#0c5460";
            }
        } else {
            doseLabel.textContent = "å‡¦æ–¹é‡ (åˆ¤å®šä¸å¯)";
            badge.textContent = "ç›®è¦–ç¢ºèªã®ã¿";
            badge.style.background = "#e2e3e5"; badge.style.color = "#383d41";
        }

        const refContainer = document.getElementById('refLinksContainer');
        const refArea = document.getElementById('refArea');
        refContainer.innerHTML = '';
        if (drug.refs && drug.refs.length > 0) {
            refArea.style.display = 'block';
            drug.refs.forEach(refId => {
                const refData = dbRefs[refId];
                if (refData && refData.url) {
                    const a = document.createElement('a');
                    a.textContent = `[${refId}] ${refData.title}`;
                    a.href = refData.url;
                    a.target = "_blank";
                    refContainer.appendChild(a);
                } else {
                    const span = document.createElement('span');
                    span.textContent = `[${refId}] ${refData ? refData.title : 'æ–‡çŒ®'}`;
                    span.className = "ref-nolink";
                    refContainer.appendChild(span);
                }
            });
        } else {
            refArea.style.display = 'none';
        }
        runAudit();
    }

    function runAudit() {
        const resBox = document.getElementById('auditResult');
        const weight = parseFloat(document.getElementById('weight').value);
        const age = parseFloat(document.getElementById('age').value);
        const inputDose = parseFloat(doseInput.value);

        if (!currentDrug) return;

        // --- ãƒ‘ã‚¿ãƒ¼ãƒ³A: å¹´é½¢å›ºå®šç”¨é‡ãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹å ´åˆ ---
        if (currentDrug.ageRule && !isNaN(age)) {
            const ar = currentDrug.ageRule;
            const unitStr = ar.unit === 1 ? "å›" : "æ—¥";
            
            // å¹´é½¢ã«ãƒãƒƒãƒã™ã‚‹ãƒ«ãƒ¼ãƒ«ã‚’æ¢ã™ (start <= age < end)
            const match = ar.list.find(r => age >= r.start && age < r.end);
            
            if (match) {
                const targetDose = match.dose;
                if (!inputDose) {
                    resBox.className = "audit-box audit-check";
                    resBox.innerHTML = `<strong>å¹´é½¢ç”¨é‡ (${age}æ­³):</strong> æ¨å¥¨ <strong>${targetDose} mg/${unitStr}</strong><br><small>â€»ä½“é‡æ›ç®—ã§ã¯ãªãå¹´é½¢ã«åŸºã¥ãå›ºå®šç”¨é‡ã§ã™ã€‚</small>`;
                    return;
                }
                // èª¤å·®Â±20%ã§åˆ¤å®š
                const ratio = inputDose / targetDose;
                if (ratio < 0.8) {
                    resBox.className = "audit-box audit-danger";
                    resBox.innerHTML = `<strong>ğŸ”½ éå°‘ã®å¯èƒ½æ€§</strong><br>å…¥åŠ›: ${inputDose}mg < æ¨å¥¨: ${targetDose}mg (${age}æ­³å›ºå®š)`;
                } else if (ratio > 1.2) {
                    resBox.className = "audit-box audit-danger";
                    resBox.innerHTML = `<strong>ğŸ”¼ éé‡ã®å¯èƒ½æ€§</strong><br>å…¥åŠ›: ${inputDose}mg > æ¨å¥¨: ${targetDose}mg (${age}æ­³å›ºå®š)`;
                } else {
                    resBox.className = "audit-box audit-safe";
                    resBox.innerHTML = `<strong>âœ… é©æ­£ç¯„å›²å†…</strong><br>${age}æ­³ã®æ¨å¥¨é‡ (${targetDose}mg) ã«é©åˆã—ã¦ã„ã¾ã™ã€‚`;
                }
                return;
            }
            // å¹´é½¢ç¯„å›²å¤–ã ãŒã€ä½“é‡ãƒ«ãƒ¼ãƒ«ãŒã‚ã‚Œã°ãã¡ã‚‰ã«ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ã€ãªã‘ã‚Œã°ã‚¨ãƒ©ãƒ¼
            if (!currentDrug.rule) {
                resBox.className = "audit-box audit-check";
                resBox.innerHTML = `âš ï¸ ã“ã®å¹´é½¢ (${age}æ­³) ã®å›ºå®šç”¨é‡ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“ã€‚<br>åŸæ–‡ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚`;
                return;
            }
        }

        // --- ãƒ‘ã‚¿ãƒ¼ãƒ³B: ä½“é‡æ›ç®— (ã¾ãŸã¯å¹´é½¢å…¥åŠ›ãªã—) ---
        if (!currentDrug.rule) {
            resBox.className = "audit-box audit-check";
            resBox.innerHTML = `<strong>âš ï¸ è‡ªå‹•åˆ¤å®šä¸å¯</strong><br><small>ä¸‹ã®åŸæ–‡ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚</small>`;
            return;
        }

        const r = currentDrug.rule;
        const unitStr = r.unit === 1 ? "å›" : "æ—¥";
        
        if (!weight || !inputDose) {
            resBox.className = "audit-box audit-check";
            if(weight) {
                resBox.innerHTML = `<strong>ç›®å®‰:</strong> ${weight}kg â†’ <strong>${(r.min*weight).toFixed(2)}ï½${(r.max*weight).toFixed(2)} mg/${unitStr}</strong>`;
            } else {
                resBox.innerHTML = "ä½“é‡ã¨å‡¦æ–¹å€¤ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„";
            }
            return;
        }

        let minSafe = r.min * weight;
        let maxSafe = r.max * weight;
        let limitMsg = "";
        if (r.limitDay && r.unit === 0 && maxSafe > r.limitDay) {
            maxSafe = r.limitDay;
            limitMsg = ` (ä¸Šé™: ${r.limitDay}mg)`;
        }

        if (inputDose < minSafe) {
            resBox.className = "audit-box audit-danger";
            resBox.innerHTML = `<strong>ğŸ”½ éå°‘</strong><br>å…¥åŠ›: ${inputDose} mg < ä¸‹é™: ${minSafe.toFixed(2)} mg`;
        } else if (inputDose > maxSafe) {
            resBox.className = "audit-box audit-danger";
            resBox.innerHTML = `<strong>ğŸ”¼ éé‡</strong><br>å…¥åŠ›: ${inputDose} mg > ä¸Šé™: ${maxSafe.toFixed(2)} mg${limitMsg}`;
        } else {
            resBox.className = "audit-box audit-safe";
            resBox.innerHTML = `<strong>âœ… é©æ­£ç¯„å›²å†…</strong><br>å…¥åŠ›: ${inputDose} mg ã¯ç›®å®‰å†…ã§ã™ã€‚`;
        }
    }

    // --- 5. ãƒ‡ãƒ¼ã‚¿ä¿å­˜ (V4ã‚³ãƒ³ãƒãƒ¼ã‚¿ãƒ¼å†…è”µ: æ”¹è¡Œ/å¹´é½¢åˆ—å¯¾å¿œ) ---
    function saveData() {
        const raw = document.getElementById('pasteArea').value;
        if (!raw.trim()) { alert("ãƒ‡ãƒ¼ã‚¿ã‚’è²¼ã‚Šä»˜ã‘ã¦ãã ã•ã„"); return; }

        const rows = [];
        let currentRow = [], currentCell = "", inQuote = false;
        
        // Excelãƒ‘ãƒ¼ã‚µãƒ¼
        for (let i = 0; i < raw.length; i++) {
            const char = raw[i], nextChar = raw[i+1];
            if (inQuote) {
                if (char === '"' && nextChar === '"') { currentCell += '"'; i++; }
                else if (char === '"') { inQuote = false; }
                else { currentCell += char; }
            } else {
                if (char === '"') { inQuote = true; }
                else if (char === '\t') { currentRow.push(currentCell); currentCell = ""; }
                else if (char === '\n' || char === '\r') {
                    if (char === '\r' && nextChar === '\n') i++;
                    currentRow.push(currentCell);
                    rows.push(currentRow); currentRow = []; currentCell = "";
                } else { currentCell += char; }
            }
        }
        if (currentCell || currentRow.length > 0) { currentRow.push(currentCell); rows.push(currentRow); }

        const result = [];
        rows.forEach(cols => {
            if (cols.length < 4) return;
            // åˆ—æŠ½å‡º: [4]Min [5]Max [6]Flag [7]Limit [8]Refs [9]AgeRule
            const min = parseFloat(cols[4]), max = parseFloat(cols[5]), flag = parseInt(cols[6]);
            const limit = parseFloat(cols[7]), refsRaw = cols[8] ? cols[8].trim() : "";
            const ageRuleRaw = cols[9] ? cols[9].trim() : "";

            // ä½“é‡ãƒ«ãƒ¼ãƒ«
            let rule = null;
            if (!isNaN(min) && !isNaN(max) && !isNaN(flag)) {
                rule = { min: min, max: max, unit: flag, limitDay: isNaN(limit) ? null : limit };
            }

            // å¹´é½¢ãƒ«ãƒ¼ãƒ«è§£æ (ä¾‹: "0-0.5:4, 0.5-1:12")
            let ageRule = null;
            if (ageRuleRaw) {
                const list = [];
                const parts = ageRuleRaw.split(',');
                parts.forEach(p => {
                    const m = p.match(/([\d\.]+)-([\d\.]+):([\d\.]+)/);
                    if(m) list.push({ start: parseFloat(m[1]), end: parseFloat(m[2]), dose: parseFloat(m[3]) });
                });
                if(list.length > 0) {
                    // å¹´é½¢ãƒ«ãƒ¼ãƒ«ã®å˜ä½ã¯ã€å…¨ä½“ãƒ•ãƒ©ã‚°ãŒã‚ã‚Œã°ãã‚Œã‚’ç¶™æ‰¿ã€ãªã‘ã‚Œã°0(æ—¥)ã¨ä»®å®š
                    ageRule = { list: list, unit: !isNaN(flag) ? flag : 0 };
                }
            }

            let refs = refsRaw ? refsRaw.split(/[,ã€\s]+/).map(s => parseInt(s.replace(/\D/g, ''))).filter(n => !isNaN(n)) : [];

            result.push({
                name: cols[0].trim(), generic: cols[1].trim(), yomi: cols[2].trim(),
                text: cols[3].trim(), rule: rule, ageRule: ageRule, refs: refs
            });
        });

        localStorage.setItem('pediatric_drug_db', JSON.stringify(result));
        dbDrugs = result;
        document.getElementById('saveStatus').innerHTML = `âœ… ${result.length}ä»¶ã®ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜ãƒ»æ›´æ–°ã—ã¾ã—ãŸï¼`;
        alert("ä¿å­˜ã—ã¾ã—ãŸã€‚");
    }

    function resetData() {
        if(confirm("ä¿å­˜ã•ã‚ŒãŸãƒ‡ãƒ¼ã‚¿ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ")) {
            localStorage.removeItem('pediatric_drug_db');
            dbDrugs = [];
            document.getElementById('saveStatus').textContent = "ãƒ‡ãƒ¼ã‚¿ã‚’ãƒªã‚»ãƒƒãƒˆã—ã¾ã—ãŸã€‚";
            alert("ãƒªã‚»ãƒƒãƒˆã—ã¾ã—ãŸã€‚");
        }
    }

    // --- 6. çŸ¥è­˜ãƒ„ãƒ¼ãƒ« ---
    function calcAugsberger() {
        const ad = parseFloat(document.getElementById('augAdult').value);
        const wt = parseFloat(document.getElementById('augWeight').value);
        if (ad && wt) {
            const res = ad * (wt * 4 + 20) / 100;
            document.getElementById('augResult').textContent = res.toFixed(1);
        }
    }

    function drawGrowthChart(containerId, type) {
        const w = 400, h = 300, pad = 40;
        const svgNS = "http://www.w3.org/2000/svg";
        const svg = document.createElementNS(svgNS, "svg");
        svg.setAttribute("width", "100%");
        svg.setAttribute("height", "100%");
        svg.setAttribute("viewBox", `0 0 ${w} ${h}`);
        const data = growthData[type];
        
        // è»¸
        const path = document.createElementNS(svgNS, "path");
        path.setAttribute("d", `M${pad},${pad} V${h-pad} H${w-pad}`);
        path.setAttribute("stroke", "#333");
        path.setAttribute("stroke-width", "2");
        path.setAttribute("fill", "none");
        svg.appendChild(path);
        
        for(let i=0; i<=12; i+=2) {
            const x = pad + (i/12)*(w-pad*2);
            const txt = document.createElementNS(svgNS, "text");
            txt.setAttribute("x", x); txt.setAttribute("y", h-20);
            txt.setAttribute("text-anchor", "middle"); txt.textContent = i;
            svg.appendChild(txt);
        }
        for(let i=0; i<=50; i+=10) {
            const y = (h-pad) - (i/50)*(h-pad*2);
            const txt = document.createElementNS(svgNS, "text");
            txt.setAttribute("x", 20); txt.setAttribute("y", y+5);
            txt.setAttribute("text-anchor", "end"); txt.textContent = i;
            svg.appendChild(txt);
        }
        
        let d = `M`;
        data.forEach((p, i) => {
            const x = pad + (p[0]/12)*(w-pad*2);
            const y = (h-pad) - (p[1]/50)*(h-pad*2);
            d += `${i===0?'':','}${x} ${y}`;
            const circle = document.createElementNS(svgNS, "circle");
            circle.setAttribute("cx", x); circle.setAttribute("cy", y); circle.setAttribute("r", 3);
            circle.setAttribute("fill", type==='boy'?'#3498db':'#e74c3c');
            svg.appendChild(circle);
        });
        
        const line = document.createElementNS(svgNS, "polyline");
        line.setAttribute("points", d.replace(/M/,''));
        line.setAttribute("stroke", type==='boy'?'#3498db':'#e74c3c');
        line.setAttribute("stroke-width", "3");
        line.setAttribute("fill", "none");
        svg.appendChild(line);
        document.getElementById(containerId).appendChild(svg);
    }

    function drawGrowthTable() {
        const container = document.getElementById('growthTableContainer');
        let html = '<table class="common-table"><thead><tr><th>å¹´é½¢ (æ­³)</th>';
        growthData.boy.forEach(pt => { html += `<th>${pt[0]}</th>`; });
        html += '</tr></thead><tbody><tr><th>ç”·å­ (kg)</th>';
        growthData.boy.forEach(pt => { html += `<td>${pt[1].toFixed(1)}</td>`; });
        html += '</tr><tr><th>å¥³å­ (kg)</th>';
        growthData.girl.forEach(pt => { html += `<td>${pt[1].toFixed(1)}</td>`; });
        html += '</tr></tbody></table>';
        container.innerHTML = html;
    }
</script>
</body>
</html>
